import React, { useState, useEffect, useRef } from "react";
import Data from "./MockData.json";

const Input = () => {
  const [searchLetter, setSearchLetter] = useState("");
  const [change, setChange] = useState(false);
  const [toggle, setToggle] = useState(false);

  const toggler = () => {
    setToggle((prev) => !prev);
  };

  const makeChange = (e) => {
    setChange((e.prev = !e.prev));
  };

  let menuRef = useRef();

  // useEffect(() => {
  //   document.addEventListener("mousedown", () => {
  //     setChange(false);
  //   });
  // });

  return (
    <div className="input-div">
      <input
        onKeyUp={makeChange}
        type="text"
        placeholder="Search..."
        className="input"
        onChange={(event) => {
          setSearchLetter(event.target.value);
        }}
      />
      <div
        ref={menuRef}
        className={change ? "drop-input-active" : "drop-input"}
      >
        {Data.filter((val) => {
          if (searchLetter == "") {
            return val;
          } else if (
            val.first_name.toLowerCase().includes(searchLetter.toLowerCase())
          ) {
            return val;
          } else if (
            val.profession.toLowerCase().includes(searchLetter.toLowerCase())
          ) {
            return val;
          }
        }).map((val, key) => {
          return (
            <div
              className={toggle ? "input-drop-list1" : "input-drop-list2"}
              key={key}
            >
              <div onClick={toggler} className="input-drop-list-pick">
                <span>{val.profession}</span>
                <span>{val.first_name}</span>
              </div>
              <div className={toggle ? "side-list" : "side-list-active"}>
                <span className="side-list-items">
                  <span className="side-list-item-piece">{val.first_name}</span>
                  <span className="side-list-item-piece">{val.profession}</span>

                  <span className="side-list-item-piece">{val.phone}</span>
                  <span className="side-list-item-piece">
                    {val.email_address}
                  </span>
                  <span className="side-list-item-piece">{val.rating}</span>

                  <span className="side-list-item-piece">
                    <svg
                      width="78"
                      height="22"
                      viewBox="0 0 78 22"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M2.21507 4.1032L2.21491 4.10328C1.37603 4.57077 0.798691 5.38554 0.769862 6.48959L0.769861 6.48962C0.719333 8.42001 1.16529 11.0437 2.98593 14.1551L2.21507 4.1032ZM2.21507 4.1032C3.05208 3.63637 4.14645 3.51532 5.21365 3.785L5.21417 3.78513M2.21507 4.1032L5.21417 3.78513M5.21417 3.78513C5.65448 3.8959 6.03039 4.18063 6.25596 4.57224L7.26838 6.33151C7.26839 6.33153 7.2684 6.33154 7.26841 6.33156C7.56493 6.847 7.65049 7.45629 7.50749 8.03278C7.36448 8.60932 7.00373 9.1092 6.49973 9.42802L6.49954 9.42814M5.21417 3.78513L6.49954 9.42814M6.49954 9.42814L5.6095 9.99171C5.60943 9.99175 5.60936 9.99179 5.6093 9.99183L6.49954 9.42814ZM8.42667 14.6669L8.42661 14.667C7.88355 14.9826 7.21605 14.9591 6.80158 14.5254C6.0148 13.7051 5.30403 12.5178 4.97787 11.429C4.97786 11.4289 4.97784 11.4289 4.97782 11.4288L5.4568 11.2854L8.42667 14.6669ZM8.42667 14.6669L8.91921 14.3806C8.91928 14.3805 8.91935 14.3805 8.91942 14.3804C9.18539 14.226 9.47964 14.1258 9.78502 14.0858C10.0905 14.0458 10.4009 14.0667 10.6981 14.1475C10.9953 14.2282 11.2733 14.3671 11.5159 14.556C11.7584 14.7448 11.9607 14.9798 12.111 15.2471L12.1112 15.2474M8.42667 14.6669L12.1112 15.2474M12.1112 15.2474L13.0186 16.8592C13.243 17.2588 13.28 17.736 13.121 18.1665C12.7433 19.1837 12.0227 19.9831 11.1658 20.3766C10.3065 20.7707 9.31279 20.7557 8.39912 20.1484L8.39889 20.1483M12.1112 15.2474L8.39889 20.1483M8.39889 20.1483C6.77331 19.0691 4.79108 17.2376 2.98601 14.1552L8.39889 20.1483ZM12.0006 3.74707L11.5199 3.88469L12.0006 3.74707C11.9962 3.73176 11.998 3.71532 12.0059 3.70119C12.0138 3.687 12.0274 3.67601 12.0441 3.67127C12.0608 3.66651 12.0787 3.66862 12.0937 3.67692L12.5255 3.91623L12.5258 3.91635C13.9674 4.71424 15.1934 5.84801 16.0993 7.2206C17.005 8.59301 17.5637 10.1634 17.7277 11.7976C17.7277 11.7976 17.7277 11.7976 17.7277 11.7977C17.7277 11.7978 17.7278 11.798 17.7278 11.7982L17.7627 12.1504L17.7638 12.1619L17.7655 12.1734C17.7667 12.1814 17.7662 12.1896 17.7641 12.1974C17.762 12.2053 17.7583 12.2128 17.7531 12.2194C17.748 12.226 17.7414 12.2316 17.7338 12.2357L17.9746 12.6739L17.7338 12.2357C17.7262 12.2399 17.7177 12.2426 17.7089 12.2435C17.7001 12.2443 17.6912 12.2434 17.6828 12.2408L17.5338 12.7181L17.6828 12.2408C17.6744 12.2382 17.6667 12.2339 17.6602 12.2284C17.6537 12.2229 17.6485 12.2162 17.6449 12.2088C17.6412 12.2014 17.6391 12.1934 17.6386 12.1854L17.638 12.174L17.6369 12.1627L17.6009 11.8095C17.4387 10.1947 16.8865 8.64319 15.9918 7.28749C15.0971 5.93189 13.8865 4.81247 12.4635 4.02471C12.4634 4.02466 12.4633 4.0246 12.4632 4.02455L12.0308 3.78444L12.0304 3.78421C12.0154 3.77594 12.005 3.76242 12.0006 3.74707ZM11.4373 6.55411L11.0157 6.6602L11.4373 6.55411C11.4354 6.54644 11.435 6.53849 11.4361 6.53069C11.4373 6.52289 11.44 6.51532 11.4441 6.50841L11.449 6.50024C11.4574 6.49067 11.4688 6.48356 11.4819 6.4803C11.4988 6.4761 11.5166 6.47882 11.5312 6.48759L11.5325 6.48833L11.6714 6.57095C11.6715 6.571 11.6716 6.57105 11.6717 6.5711C12.5197 7.07776 13.247 7.76179 13.8035 8.57579C14.36 9.3897 14.7324 10.3142 14.8951 11.2853C14.8951 11.2855 14.8952 11.2857 14.8952 11.2859L14.9447 11.5849L14.9459 11.5927L14.9475 11.6005C14.9491 11.6084 14.949 11.6165 14.9474 11.6244C14.9457 11.6323 14.9425 11.6399 14.9378 11.6466L14.9378 11.6466C14.9331 11.6534 14.9269 11.6593 14.9197 11.6639C14.9124 11.6685 14.9042 11.6716 14.8956 11.6731L14.9774 12.1663L14.8956 11.6731C14.8869 11.6745 14.8781 11.6742 14.8696 11.6721L14.7534 12.1584L14.8696 11.6721C14.8611 11.6701 14.8532 11.6664 14.8463 11.6614C14.8394 11.6563 14.8338 11.65 14.8296 11.643L14.3998 11.8985L14.8296 11.643C14.8254 11.6359 14.8227 11.6282 14.8216 11.6202L14.8205 11.612L14.8191 11.6039L14.7686 11.3064C14.7686 11.3061 14.7685 11.3059 14.7685 11.3056C14.6091 10.3516 14.2437 9.44361 13.6978 8.64428C13.1517 7.84473 12.438 7.17303 11.6061 6.67549L11.605 6.67485L11.4658 6.59209C11.4658 6.59207 11.4657 6.59205 11.4657 6.59202C11.4585 6.58772 11.4524 6.58212 11.4475 6.57562C11.4427 6.5691 11.4392 6.56178 11.4373 6.55411Z"
                        fill="black"
                        stroke="black"
                      />
                      <path
                        d="M76.4487 6.57482C75.9218 5.3198 75.1551 4.17908 74.1916 3.21623C73.2309 2.2517 72.0898 1.48485 70.833 0.9592C69.5454 0.418103 68.1621 0.140737 66.765 0.143576H66.718C65.2971 0.150608 63.9231 0.431857 62.629 0.984982C61.3829 1.51602 60.2525 2.28423 59.3008 3.2467C58.3466 4.20739 57.5888 5.34412 57.0696 6.59357C56.5306 7.89286 56.2575 9.2866 56.2663 10.6928C56.2734 12.3193 56.6633 13.9342 57.3913 15.3779V18.9404C57.3913 19.5357 57.8752 20.0186 58.4694 20.0186H62.0347C63.4883 20.7505 65.0923 21.1356 66.7204 21.1436H66.7697C68.1742 21.1436 69.5341 20.8717 70.8165 20.3396C72.067 19.8203 73.2039 19.0624 74.1634 18.1084C75.1311 17.1498 75.8921 16.0295 76.4252 14.7803C76.9772 13.4865 77.259 12.1108 77.2661 10.6904C77.2708 9.2631 76.9936 7.87794 76.4487 6.57482ZM62.077 11.7686C61.457 11.7686 60.952 11.2647 60.952 10.6436C60.952 10.0225 61.457 9.51857 62.077 9.51857C62.6971 9.51857 63.202 10.0225 63.202 10.6436C63.202 11.2647 62.6994 11.7686 62.077 11.7686ZM66.765 11.7686C66.145 11.7686 65.64 11.2647 65.64 10.6436C65.64 10.0225 66.145 9.51857 66.765 9.51857C67.3851 9.51857 67.89 10.0225 67.89 10.6436C67.89 11.2647 67.3851 11.7686 66.765 11.7686ZM71.453 11.7686C70.833 11.7686 70.328 11.2647 70.328 10.6436C70.328 10.0225 70.833 9.51857 71.453 9.51857C72.0731 9.51857 72.578 10.0225 72.578 10.6436C72.578 11.2647 72.0731 11.7686 71.453 11.7686Z"
                        fill="black"
                      />
                    </svg>
                  </span>
                </span>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
};

export default Input;
